---
title: "Secure Credential Transfer"
abbrev: "Secure Credential Transfer"
docname: draft-securecredential-transfer-latest
category: std

ipr: trust200902
area: TODO
workgroup: TODO Working Group
keyword: Internet-Draft

stand_alone: yes
smart_quotes: no
pi: [toc, sortrefs, symrefs]

author:
 -
    name: Dmitry Vinokurov
    organization: Apple Inc
    email: dvinokurov@apple.com
 -
    name: Matt Byington
    organization: Apple Inc
    email: 
 -
    name: Casey Astiz
    organization: Apple Inc
    email: 
 -
    name: B. Chester
    organization: Apple Inc
    email: 
 -
    name: A. Pelletier
    organization: Apple Inc
    email: 
 -
    name: Matthias Lerch
    organization: Apple Inc
    email: 

normative:

informative:


--- abstract

This document describes a mechanism to transfer digital credentials securely between two devices
Secure credentials may represent a digital key to a hotel room, a digital key to a door lock in a house 
or a digital key to a car. Devices that share credentials may belong to the same or two different platforms (e.g. iOS and Android).
Secure transfer may include one or more write and read operations.
Credentials transfer needs to be performed securely due to the sensitive nature of the information.

--- middle

# Introduction

Today, there is no standard way of transferring digital credentials securely between two devices 
belonging to the same platform or two different platforms. This document proposes a solution to this problem 
by introducing a Relay server which allows devices to exchange encrypted Provisioning Information securely.
The Relay server solves this problem by creating and managing temporary mailbox storage.

Each mailbox can be referenced by devices from a unique mailbox identifier in a URL.
The URL pointing to encrypted Provisioning Information is to be passed between devices directly 
over various channels (e.g. SMS, email, messaging applications).
The exchange of the URL is outside of the scope of this document.

This document describes a Hypertext (HTTP) Application Programming Interface (API) that allows 
Sender and Receiver devices to interact with a Relay server in order to perform secure credential transfer.


# Terminology

{::boilerplate bcp14-tagged}

- Relay Server - Web application exposing Secure Credential Transfer API to remote devices. It serves to securily transfer Provisioning Information between two remote devices.

- Sender device - a remote device initiating a transfer of Provisioning Information to another remote device (Receiver) so that Receiver can provision these credentials.

- Receiver device - a remote device that receives Provisioning Information from Sender and uses it to provision Credentials Information to an application running on it.

- Provisioning Partner - Third party Partner that owns, manages, accepts and revokes Credential Information on a remote device (Sender or Receiver).

- Provisioning Information - a set of data fields, allowing a device to receive Credential Information from Provisioning Partner and install it locally. The entire content of Provisioning Information is encrypted by Sender or Receiver device. Therefore, it is not visible to Relay Server.

- Provisioning Information - a set of data fields allowing a device to receive Credential Information from Provisioning Partner and install it locally. The entire content of Provisioning info is encrypted be Sender or Receiver device; therefore, is not visible to Relay Server

- Credential Information - a set of data fields used to provision an access credential on the receiver's device.

- Transaction Information - information data structure generated by Receiver device required to start provisioning in the stateful flow. It includes cryptographic keys generated by Receiver device. Sender device needs to approve (sign) Transaction Information before Receiver can start provisioning. Exact content of Transaction Information is specific for each Provisioning Partner and out of scope of this document.

- Secret - a symmetric encryption key shared by a pair of a Sender and a Receiver devices, used to encrypt Provisioning Information stored on a Relay server. Secret stays the same for the entire credential transfer flow (one Secret per complete transfer). All information stored on Relay server is always encrypted using the Secret. In Stateful flow all information exchanged by Sender and Receiver devices throug Relay server is encrypted with the same Secret. Thus, effectively, Secret has a one-to-one relation with the mailbox.

- Device Claim - a unique token allowing caller to read from /write to data the mailbox. Exactly one sender device and one receiver device should be able to read from/write secure payload to the mailbox. Sender device provides a deviceClaim in order to create a mailbox or update mailbox data and Relay server binds this Sender's Device Claim to the mailbox. When the receiver device first reads data from the mailbox it presents its Device Claim to the Relay Server, which binds the mailbox to the given Receiver device. Thus both Sender and Receiver devices are bound to the mailbox (allowed to read from/write to it). Only Sender/Receiver devices that can present valid Device Claims are allowed to send subsequent read/write/update/delete calls to the mailbox. The value shall be a UUID {{!RFC4122}}.
 
- Notification Token - a short or long-lived unique token stored by the Sender or Receiver device in a mailbox on the Relay server, which allows Relay server to send a push notification message to the Sender or Receiver device, informing them on data update in the mailbox.


# Credential transfer workflows

We define two flows for credential transfer: 1. Stateless (Relay server facilitates a single credential data transfer: Sender -> Relay -> Receiver) and 2. Stateful (Relay facilitates additional datat transfers - there are 3 data exchanges in this flow to prepare credential data for provisioning by Receiver). The details are provided below.


# Security Considerations

This section discusses security considerations for the protocol.


# IANA Considerations

This document has no IANA actions.


--- back

# Acknowledgments

TODO acknowledge.
